예전에 기술면접을 보는 중에 하나의 질문을 받았던 적이 있다.

어느 상황을 제시해 주셨는데, 그 상황은 어떤 도메인에 관련되어 ERD를 설계해야하는 상황이었다.

정확하게는 기억이 안 나지만 `면접자님이라면 여기서 어떤 Column을 PK로 두실 건지?` 에 대한 질문이었다. 주어진 컬럼에 대해서 생각을 꽤 많이 했고,
타당한 이유와 함께 어떤 `하나`의 컬럼을 PK로 잡겠다고 말씀을 드렸다.

**정답은 `두 개`의 컬럼을 PK로 잡아야 했다는 것.** (물론 ERD에 정답은 없지만 면접관님들께서 생각하신 답은 그리 하였음. 그에 대한 이유와 함께 설명을 들었다.)


나는 하나의 테이블엔 `오직 하나만의 PK`를 가져야 한다고 고정관념이 박혀 있었기에, 사실 들어도 속으로는 `왜 PK가 두 개지?` 였다.
 그렇다. `PK는 오직 하나의 컬럼으로만 설정할 수 있다는 것이 절대 아니다.`

그런데 생각해보니 PK는 무엇인가? 서로 중복되지 않는 `UNIQUE한 값`이다. 그렇다면 두 개 이상일 때는 어떻게 관리해야하는 것일까?

두 컬럼을 합쳐서 봤을 때 중복이 아니라면, 무결성의 원칙을 지키는 것이다.

>예를 들어서, PK 속성으로 되어 있는 A 컬럼과 B 컬럼이 있다고 치자.
> 
> [A = 1, B = 1], [A = 1, B = 2]
> 
> 위의 값들은 중복된 값이 아니다. 따라서 PK 값으로 들어갈 수 있다. 

### **따라서, 복합키(Composite Key)를 만드는 것이지. 기본 키(PK)가 복수라는 것은 잘못된 표현이다.**

```mysql
create table test(
    A CHAR(4) PRIMARY KEY, -- 에러
    B CHAR(4) PRIMARY KEY ... -- 에러
)

--- 결과 

SQL Error [1068] [42000]: Mulitple primary key defined
```

그래서 기본키를 구성하는 칼럼을 복수로 만들기 위해서 아래의 예제처럼 테이블을 생성해주면 가능하다.

```mysql
create table test(
    A CHAR(4),
    B CHAR(4),
    CONSTRAINT test_PK PRIMARY KEY (A, B)
)
```

이렇게 제약조건을 밑에 작성해주면 가능하다. 다시 한번 정리하자면 `PK를 구성하는 칼럼은 복수일 수 있다. 하지만 PK가 복수일 수는 없다.` 꼭 기억해야만 한다.

